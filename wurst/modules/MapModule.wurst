package MapModule
import TypeCasting
import HashMap

public module MapModule<Z>
    protected static let zzz_map = new HashMap<Z, thistype>()
    protected Z mapRef 

    static function of(Z t) returns thistype
        return zzz_map.get(t)

    function attachTo(Z t)
        mapRef = t
        zzz_map.put(t, this)

    ondestroy
        zzz_map.remove(mapRef)
