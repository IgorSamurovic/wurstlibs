package MapModule
import TypeCasting
import HashMap

public module MapModule<T>
    static let zzz_map = new HashMap<T, thistype>()
    T mapRef 

    static function of(T t) returns thistype
        return zzz_map.get(t)

    function attachTo(T t)
        mapRef = t
        zzz_map.put(t, this)

    ondestroy
        zzz_map.remove(mapRef)
